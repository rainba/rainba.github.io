<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  



  <meta name="description" content="​">
<meta name="keywords" content="错误的行为,行为经济学,理查德·泰勒">
<meta property="og:type" content="article">
<meta property="og:title" content="第29章 球队选秀与贝克尔猜想">
<meta property="og:url" content="http://yoursite.com/2019/10/13/财经/错误的行为Richard H. Thaler/第29章 球队选秀与贝克尔猜想/index.html">
<meta property="og:site_name" content="Rainba">
<meta property="og:description" content="​">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-10-19T06:11:40.388Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第29章 球队选秀与贝克尔猜想">
<meta name="twitter:description" content="​">






  <link rel="canonical" href="http://yoursite.com/2019/10/13/财经/错误的行为Richard H. Thaler/第29章 球队选秀与贝克尔猜想/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>第29章 球队选秀与贝克尔猜想 | Rainba</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rainba</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Rainba Perspective</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  


</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/13/财经/错误的行为Richard H. Thaler/第29章 球队选秀与贝克尔猜想/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content>
      <meta itemprop="description" content="Moisturizing things in a fine silence">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rainba">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第29章 球队选秀与贝克尔猜想

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-10-19 14:11:40" itemprop="dateModified" datetime="2019-10-19T14:11:40+08:00">2019-10-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/财经/" itemprop="url" rel="index"><span itemprop="name">财经</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/财经/错误的行为Richard-H-Thaler/" itemprop="url" rel="index"><span itemprop="name">错误的行为Richard H. Thaler</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/财经/错误的行为Richard-H-Thaler/第七部分-助推计划：1995年至今/" itemprop="url" rel="index"><span itemprop="name">第七部分 助推计划：1995年至今</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>​     <a id="more"></a></p>
<p></p><p align="middle" size="18">错误的行为</p><br>&emsp;&emsp;<p></p>
<p><center>[美] 理查德·泰勒 著</center></p>
<p><center>王晋 译</center></p>
<p><center>中信出版社</center></p>
<h2 id="第29章-球队选秀与贝克尔猜想"><a href="#第29章-球队选秀与贝克尔猜想" class="headerlink" title="第29章  球队选秀与贝克尔猜想"></a>第29章  球队选秀与贝克尔猜想</h2><p>在顶尖的研究型学府做教授有很多独一无二的好处，其中我最珍视的一点就是：只要是我觉得有趣的事，几乎都可以进行研究，并且还可以称之为工作。前面我们已经看到，我写了一篇有关饮酒者心理账户的论文。接下来的两章我们将涉足其他两个领域：美国国家橄榄球联盟的选秀活动和电视竞猜类节目中参赛者的决策，这两个问题从表面上看似乎微不足道，但其共同点是所涉金额很高，这为我们提供了研究此类决策的绝佳途径。批评人士不断指出，如果做决策时所涉金额足够高，“行为偏差”（behavioral bias）就会消失，我们研究这两个问题就是为了回应这些批评声。</p>
<p>其中一个批评美国国家橄榄球联盟选秀活动研究的声音来自加里·贝克尔（Gary Becker），他是芝加哥大学研究价格理论的著名学者之一。[1]我将这种批评声称为“贝克尔猜想”。贝克尔认为，在充满竞争的劳动力市场上，只有能像经济人那样完成工作的人才会得到重要的工作。当被问到他对行为经济学有什么看法时，贝克尔做出了如下猜想：“社会分工即使没有完全消除（由有限理性引起的）任何效应，也会大大减弱这些效应……即使有90%的人无法进行概率计算时所需的复杂分析，也不要紧，因为剩下的那10%的人可以完成这些工作。”本章我们将检验贝克尔猜想：它是否适用于国家橄榄球联盟中各个球队的老板、总经理和教练？先剧透一下：不适用。</p>
<p>我是和我以前的学生凯德·马西（Cade Massey）一起研究这个话题的，凯德目前在沃顿商学院工作。我和凯德的合作经历与我和维尔纳·德邦特的合作经历差不多。我来到芝加哥大学的第一年就遇到了凯德，他当时还是一名MBA班的学生。令我印象深刻的是，他对如何解释人们的行为、如何使研究项目更加有趣等问题有着很好的直觉。我鼓励他继续攻读博士学位，他同意了，后来证明这个决定对我们以及有幸听过他讲课的学生来说都是一件好事。</p>
<p>我们的论文基本上围绕美国国家橄榄球联盟的选秀活动展开。在联盟中，每支球队选择球员的方式都与教授选办公室的方式十分相像。另外，请不要担心，其实要理解本章内容，并不需要特意关注美国的橄榄球比赛。总之，本章所谈及的问题，每个组织在选择员工时都会遇到。</p>
<p>下面介绍一下美国国家橄榄球联盟的选秀规则。每年春末，球队都会挑选有潜力的球员。几乎所有候选人都在美国高校踢球，专业球探和总经理可以借此了解他们的表现。每支球队轮流选择球员，选择顺序由球队前一年的比赛成绩决定。成绩最差的球队最先选择，而冠军球队最后选择。选秀共有7轮，也就是说每支球队开始时都有7个选秀权，不过有时也会有额外的选秀权，但这与我们的研究没有多大关系。球员的第一个合同期一般为4~5年，在此期间，他只能为选择他的球队效力。合同期满或者该球员退出球队，他就是自由球员了，可以与他喜欢的任何球队签约。</p>
<p>球队选秀与芝加哥大学商学院选办公室有一个重要的不同之处，即球队是可以交换选秀权的。比如，拥有第4顺位的球队可以放弃这个选择权，以换取两个或多个靠后的选秀权。我们样本中的选秀权交易次数超过400次，这足以让我们知道球队对靠前的选秀权有多么重视。球队还可以用今年的选秀权换取未来几年的选秀权，这为我们提供了研究球队的时间偏好的机会。</p>
<p>在开始研究之前，我和凯德有一种强烈的预感，即球队在选秀过程中肯定有一些非常不合逻辑的行为。具体而言，我们认为球队会过于看中靠前的选秀权，我们的预感有一部分来自几个极端事件，其中最著名的事件与传奇人物迈克·迪特卡（Mike Ditka）有关，他之前是一名具有传奇色彩的球员，后来成为新奥尔良圣徒队的教练。</p>
<p>在1999年的选秀活动中，迪特卡坚信唯一影响圣徒队夺冠的因素就是能否签下跑锋里基·威廉姆斯（Ricky Williams）。当时，圣徒队是排在第12顺位选择球员的球队，迪特卡担心威廉姆斯会被前面11支球队中的一支选走，所以迪特卡公开宣布他愿意用本队的所有选秀权交换威廉姆斯（这可不是最明智的谈判策略）。当轮到第5顺位的华盛顿红皮队时，威廉姆斯还没有被选走，迪特卡的愿望实现了，不过代价十分高昂。圣徒队的选择顺序从第12顺位上升到第5顺位，但为此放弃了其此次选秀的所有选秀权，以及次年第一轮和第三轮的选秀权。放弃次年的选秀权对圣徒队来说代价实在是太大了，因为该球队1999年的比赛成绩是倒数第二，也就是说他们放弃了2000年的第二顺位。显然，签约威廉姆斯并不足以改变圣徒队失败的命运，迪特卡也被解雇了。威廉姆斯在圣徒队效力4年，他固然是一个非常好的球员，但并不具备左右比赛结果的能力。另外，圣徒队本可以利用迪特卡放弃的选秀权选到更多好球员，大家共同努力去争取更好的成绩。这引发了我和凯德的思考：为什么要进行这种交易呢？</p>
<p>我们发现在国家橄榄球联盟的选秀过程中存在一种普遍性行为，即通过交易得到更靠前的选秀权，而圣徒队的做法只是其中的一个特例。心理学领域有5种关于决策的研究发现可以支持我们的假设：排名靠前的选秀权实在太贵了。</p>
<ol>
<li><p>过度自信。人们可能过于相信自己在辨别两名球员优劣上的能力。</p>
</li>
<li><p>过于极端的预测。在橄榄球选秀过程中，评估潜在球员素质的球探很喜欢说某某球员很可能成为超级明星，但巨星往往不那么容易出现。</p>
</li>
<li><p>赢家的诅咒。当很多人为某标的物展开竞争时，赢家对该物品的估价往往最高。选球员也是如此，尤其是那些很早就被选走又受到大力追捧的球员。赢家的诅咒指出，这些球员素质很好，但并不像选择他们的球队认为的那样好。大多数球队都认为里基·威廉姆斯是一名极具潜力的优秀球员，但他们喜欢威廉姆斯的程度都比不上迪特卡。</p>
</li>
<li><p>错误共识效应（false consensus effect）。一般来说，人们倾向于认为其他人和自己有同样的偏好。比如，iPhone（苹果智能手机）刚上市时，我让班里的学生匿名回答了两个问题：你用的是iPhone吗？你认为班里有多少人在用iPhone？用iPhone的学生认为大多数同学都在用iPhone，而没用iPhone的学生则认为大多数学生都没用iPhone。橄榄球选秀也是一样，当一支球队想选某个球员时，他们认为其他球队也有这样的想法。因此他们会尽全力去交换靠前的选秀权，以防止其他球队捷足先登。</p>
</li>
<li><p>现时偏见。球队老板、总经理和教练都想马上就赢得比赛。对于那些在选秀中很早就被选中的球员来说，球队寄希望于他们能立刻改变一个落后球队的命运，使其翻身成为赢家或是超级碗的冠军。球队要的就是马上赢得比赛！</p>
</li>
</ol>
<p>所以我们的基本假设是，靠前的选秀权的价值被高估了，也就是说，选秀活动并不符合有效市场假说。幸运的是，我们收集到了所有研究所需的数据，可以严谨地检验这一假说。</p>
<p>我们分析的第一步就是估算选秀权的市场价值。因为选秀权常常用于交换，所以我们可以通过其历史交易数据来估算选秀权的相对价值。如果你的选择权排在第12顺位，而你想上升至第5顺位，就像迪特卡那样，你愿意为此付出多大代价呢？分析结果如图18所示。图中的圆点表示具体的交易，也就是我们绘制曲线时所采用的数据。此图中有两点比较惹人注目：第一，曲线十分陡峭。第一顺位的价值是第32顺位的约5倍，而第32顺位是第二轮的第一顺位。原则上说，拥有第一顺位的球队可以通过一系列交易，得到第二轮中靠前的5个选秀权。</p>
<p>图18 美国国家橄榄球联盟选秀权的平均价值与第一顺位价值的比较</p>
<p>资料来源：马西和泰勒（Massey and Thaler），2013</p>
<p>第二，曲线与数据十分吻合。图中由点表示的具体交易值与我们绘制的曲线十分接近。在实证研究中，我们几乎从未得到与数据如此匹配的曲线。这是怎么回事呢？其原因在于，所有人都参照了一张表，这张表列出了选秀权的相对价值，它最初是由迈克·麦科伊（Mike McCoy）制作的，名为“选秀权价值排行榜”。麦科伊具有工科背景，拥有达拉斯牛仔队的少量股份。时任球队教练的吉米·约翰逊（Jimmy Johnson）让麦科伊帮忙研究如何为潜在的选秀权交易定价，麦科伊仔细研究历史交易数据后制作了这张表。虽然一开始这张表属于牛仔队的专有资料，并未公开，但它后来在联盟中广为流传，以至于所有球队都在使用它。表1显示出了第一轮选秀权的价值有多高。</p>
<p>表1 选秀权价值排行榜</p>
<p>我和凯德拜访了麦科伊，一起愉快地交流了这张表的使用情况。麦科伊强调，设定选秀权的价值并非他的本意，他只是根据历史交易数据估算出选秀权的价值。然而，我们进行分析的目的与麦科伊不同，我们想从有效市场假说的角度来检验表中所列出的数据是否“合理”。一支理性的球队是否应该为了靠前的选秀权而放弃多个选秀权？</p>
<p>要想证明球队对靠前的选秀权估值过高，我们还需要完成如下两个步骤。第一步很简单，即确定球员的薪金。幸运的是，我们可以找到相关数据。在研究薪金之前，我们还需要了解美国国家橄榄球联盟选秀市场的另一个特点，即联盟采用了薪资帽制度，也就是说，联盟为每支球队支付球员的总薪金设定了一个上限。这与美国职业棒球大联盟和欧洲足球联赛等的薪金制度迥然不同，对于后者来说，有钱的老板为了得到明星球员，想付多少钱就付多少。</p>
<p>正是由于薪资帽的存在，我们的研究才得以进行，因为每支球队必须在相同的预算下选秀。为了成为常胜将军，球队必须精打细算。如果一位俄罗斯寡头想要斥巨资签下一名橄榄球巨星，我们可以为他的决定找到合理的理由。我们可以说他通过观看这位巨星比赛得到了效用，就像他买了一件极其昂贵的艺术品一样。但是，在美国国家橄榄球联盟中，以高价签约球员或是为了得到像里基·威廉姆斯这样的球星而放弃多个选秀权，这种做法显然关系到球队的机会成本，比如可以用这些钱或选秀权签下其他多位球员。薪资帽制度表明，打造一支胜利球队的唯一方法是，要选择那些为球队带来的价值高于球队为其付出的成本的球员。</p>
<p>联盟还对新秀的薪金做出了规定，球员第一年的薪金水平按选秀顺序排列，如图19所示。图中的数据是球队支付的“最高薪金”，包括球员的工资以及预付的奖金。图19与图18有很多共同之处：第一，曲线十分陡峭，并且，首轮被选中的球员薪金要远远高于之后几轮被选中的球员薪金；第二，曲线与数据十分贴近，因为橄榄球联盟大体规定了球员在第一次合约期间的薪金水平。</p>
<p>图19 按选秀顺序排列的平均薪资水平</p>
<p>资料来源：马西和泰勒（Massey and Thaler），2013</p>
<p>所以，靠前的选秀权从交易价格和球员薪金水平这两个方面讲都是很贵的。首先，球队需要放弃多个选秀权才能换到一个靠前的选秀权（要么用多个靠后的选秀权交换一个靠前的选秀权；要么拒绝别人提议的类似交易，导致机会成本很高）。其次，需要支付给首轮被选中的新秀较高的薪资。一个显而易见的问题是：这样做值得吗？</p>
<p>我们还可以换个问法：必须满足什么条件，为靠前的选秀权支付的价格才是合理的？这些条件符合现实吗？从价格方面来看，第一个被选中的球员一般会比第32个被选中的球员要优秀5倍。单凭这一事实并不能说明什么，因为球员的价值变化范围超过5∶1。有些球员是明星球员，甚至能够彻底改变一支球队的命运，但有些球员则几乎没有什么价值，他们耗费了球队很多钱却没有带来什么回报。实际上，因为球队无法忽略沉没成本，让这些低价值球员上场反而有损球队的成绩。如果一支球队花很大代价优先选择了一名球员，那么不管球员的表现如何，球队都会顶着巨大的压力让其上场。</p>
<p>所以，选秀的关键似乎在于球队总经理区分超级明星和低价值球员的能力。这里有一个简单的思想实验：假设根据选秀的顺序排列某一位置的球员（比如四分卫、外接手等）。以其中两个排名相邻的球员为例，比如第3个被选中的跑锋和第4个被选中的跑锋。根据某种客观的衡量标准，先被选中的球员优于后被选中的球员的概率是多少？如果球队拥有绝佳的预测能力，那么先被选中的球员应该百分之百优于后被选的球员。如果球队的预测能力不佳，那么先被选中的球员优于后被选中的球员的概率将是50%，就像抛硬币正面朝上的概率一样。猜一猜，球队的预测能力如何。</p>
<p>纵观整个选秀过程，先被选中的球员更优秀的概率实际上约为52%。第一轮时的概率稍高，为56%。[2]在阅读本章剩下的内容，以及下次你想聘用某人并且“确信”自己找到了合适的人选时，请一定要牢记这一点。</p>
<p>虽然这一数值已经明确反映了我们的分析结果，但我在这里还可以更全面地介绍一下我们的评估过程。我们跟踪记录了研究期间被选中的每位球员在第一个合同期内的表现。我们给球员每一年的表现赋予一个经济价值。换句话说，我们估算了每个球员每年能为球队带来的价值，具体做法是查看在合同的第六年、第七年或第八年聘任一位同等（位置和素质）的球员需要耗资多少。那时，球员的第一份合同已经到期，他成了自由球员，所以要按照市场行情给其支付薪金。对选择他的球队而言，一名球员的绩效价值等于第一个合同期内他每一年给球队带来的价值之和。（此后，要继续留用这名球员，球队必须按照市场行情支付薪金，否则他将签约其他球队。）</p>
<p>在图20中，我们画出了球员的绩效价值曲线，并将其按照被选中的顺序排列。另外，我们还把图19中的薪资曲线也加入其中。请注意，绩效价值曲线是向下倾斜的，也就是说球队确实具有评估球员价值的能力。先被选中的球员确实更加优秀，但他们到底有多优秀呢？如果用绩效价值减去薪金，就可以得到球员的“剩余价值”，也就是说与球队支付给球员的薪金相比，球员为球队多（或少）带来了多少绩效价值。我们可以把它想象成在第一个合同期内，球队从球员身上获得的利润。</p>
<p>图20 美国国家橄榄球联盟选秀活动的“剩余价值”</p>
<p>资料来源：马西和泰勒（Massey and Thaler），2013</p>
<p>图20中最下面的那条线代表剩余价值。我们需要注意的是，这条曲线在第一轮选秀过程中是向上倾斜的，也就是说先被选中的球员的价值实际上小于后被选中的球员。但是，别忘了“选秀权价值排行榜”显示，先被选中的球员的价值远远高于后被选中的球员！图21中有两条曲线，一条是选秀权价值排行榜曲线，另一条是剩余价值曲线。纵轴表示球员的剩余价值与选秀权价值的比值，其中第1顺位球员代表的比值为1。</p>
<p>如果美国国家橄榄球联盟的球员市场是有效的，这些曲线就应该是一模一样的。</p>
<p>图21 选秀权价值排行榜与球员剩余价值的比较</p>
<p>资料来源：马西和泰勒（Massey and Thaler），2013</p>
<p>如果市场是有效的，那么这两条曲线应该一模一样。也就是说，选秀权价值曲线可以准确地预测使用该选秀权的球队可以得到的剩余价值，也就是说第一顺位将产生最大的剩余价值，第二顺位将产生第二大的剩余价值，依此类推。但是，事实并非如此。交易市场价值曲线（即选秀权价值曲线）显示，可以用第一选择权交换第二轮中的5个靠前的选择权，但我们发现第二轮的这些选择权将比球队换来的第一选择权产生更多的剩余价值。在我检验有效市场的这么多年时间里，这是我见过的最明显的悖论。</p>
<p>我们还发现选秀权市场有一点很有趣。有时球队会用今年的选秀权交换次年的选秀权。发生这种交易的概率是多少呢？随便看一眼数据，我们就会发现这种交易运用了一条简单的经验法则：今年的某一个选秀权可以换得次年轮数靠前的选秀权。比如，放弃今年第三轮的一个选秀权，可以得到明年第二轮的一个选秀权。（经详细分析发现，交易基本上遵循这一规则。）从表面来看，这条经验法则听上去并非不合情理，但我们据此推断，球队每年的贴现率达到了136%！竟然还说所有人都有现时偏好！有些聪明的球队已经意识到了这一点，它们愿意用今年的选秀权去换取次年轮数更靠前的选秀权。[3]</p>
<p>所以我们的研究总结出两条简单的建议：第一，球队应该用一个靠前的选秀权去换取多个靠后的选秀权，尤其是第二轮的选秀权；第二，成为一名“选秀银行家”，用今年的选秀权去换取次年更靠前的选秀权。</p>
<p>很多读者，尤其是那些像经济学家一样思考问题的读者，对此可能会有几种解释。所以在讨论我们研究结果的准确性，尤其是用一个靠前的选秀权去换取多个靠后的选秀权之前，我们要先排除这些可能的解释。</p>
<p>如果球队选择知名度较高的球员，即使他还没有成为明星，难道就不能通过出售印有球员名字的球衣来获得更多的利润吗？不能。各支球队会分享所有球衣以及其他衍生商品的销售收入。</p>
<p>如果球队选择知名度较高的球员，即使他没有成为明星，难道就不能通过卖出更多的比赛门票而使物有所值吗？不能。首先，美国国家橄榄球联盟的大多数球队都有等待购买季票的客户名单，但更重要的是，没有人会来观看一个无价值球员的比赛，即使他名气很大。为了全面研究这种可能性，我们仅针对攻击线锋重新做了分析。攻击线锋基本属于球场上籍籍无名的勇将，他们负责保护四分卫，防止后者被对方魁梧的球员拦截。虽然只有最忠心的球迷才能叫出他喜欢球队的攻击线锋的名字，但我们的分析结果是一样的。所以，“明星魅力”不可能解释反常现象。</p>
<p>选到真正的超级明星是否会物有所值呢？答案是否定的。我们做的一个简单分析就可以证明这一点。我们通过分析得出的主要建议是，拥有靠前选秀权的球队应该用它去交换多个靠后的选秀权。为了验证这一策略是否有效，我们以选秀权价值排行榜为依据，评估了所有以二换一的交易，比如排行榜中显示，拥有第1顺位选秀权的球队可以用它来交换第7顺位和第8顺位、第4顺位和第12顺位、第2和第15顺位等。对于每种潜在的交易，我们用两种衡量球员绩效的因素（即首发次数以及当选为全明星球员的次数）来考察球队的表现。我们发现，用一个靠前的选秀权换取多个靠后的选秀权可以大幅增加球员的首发次数，也不会影响其入选全明星赛的次数。</p>
<p>美国国家橄榄球联盟各支球队的决策者们怎么会错得这么离谱呢？在市场的作用下，为什么选秀权的价格没能与其为球队带来的剩余价值相匹配呢？问题的答案很好地证明了“有限套利”（limits to arbitrage）的存在，这个概念对我们理解金融市场尤为重要。假设有一支球队阅读并理解了我们的论文，它的决策者会怎么做呢？如果它是经常位列前茅的优秀球队，除了愿意用今年的选秀权换取明年更好的选秀权以外，它的决策者很少会利用市场的这种无效性。因为无法卖掉一个靠前的选秀权，所以聪明的球队没有什么套利的机会，外部投资者的套利机会就更少了。我们想到的最佳方法就是买一支成绩很差的球队，用一个靠前的选秀权来换取多个靠后的选秀权，以此改进选秀策略，并且会持续一段时间。</p>
<hr>
<p>在我们这篇论文的初稿尚未完成时，就有一支橄榄球球队表示对我们的研究很感兴趣，现在我已经与三支球队非正式地合作过（当然，每一次只与一支球队合作）。我们第一个接触的就是华盛顿红皮队的老板丹尼尔·斯奈德（Daniel Snyder）。布思商学院企业家俱乐部曾邀请斯奈德先生做一次演讲，其中一位组织者让我主持讨论部分。我知道自己在午餐时可以和斯奈德一对一地聊会儿天，就同意了。</p>
<p>丹尼尔·斯奈德是一个靠自身努力获得成功的人。他大学辍学后开了一家公司，主要业务是包机服务，还向大学生出售便宜的春假机票。后来他进入了直邮广告行业，并且在2000年的市场巅峰期幸运地卖掉了自己的公司，这证明他很聪明。他用卖公司的钱加上一大笔贷款购买了红皮队，这是他小时候就很喜欢的一支球队。（很多人认为这支球队的名字很难听，这没什么奇怪的，但斯奈德决定继续使用这个名字。）我们见面时，他刚成为红皮队老板没多久。</p>
<p>我向斯奈德介绍了我和凯德所做的研究，虽然当时已是赛季中期，他还是立刻表示将派“他的下属”与我们见面。他说：“我们想在所有事情上都做到最好。”显然，斯奈德先生想做的事，总会做成。一个周一，我接到了他的首席运营官的电话，他表示想立刻与我和凯德见面。周五我们就和他以及他的两位副手见了面，讨论让我们双方都受益匪浅。我和凯德向他们介绍了基本的研究结果，他们也确认了一些规则的细节。</p>
<p>赛季结束后，我们与斯奈德的下属做了进一步沟通。那时，我们十分确信他们已经理解了那两条建议：用一个靠前的选秀权换取多个靠后的选秀权；用今年较差的选秀权换取次年更好的选秀权。我和凯德怀着极大的兴致在电视上观看了当年的选秀过程，结果却让我们十分失望。红皮队所做的与我们的建议恰恰相反，它们用多个靠后的选秀权换取了一个靠前的选秀权，然后用次年一个靠前的选秀权换取了当年一个靠后的选秀权。当我们询问红皮队的联系人这是怎么回事时，只得到了一个简短的回答：“斯奈德先生希望球队今年就能赢。”</p>
<p>由此可以很好地预测斯奈德的未来决策。2012年，红皮队拥有第6顺位选秀权，这说明它在2011年是倒数第六的球队，球队十分想要一名高素质的四分卫。当时，有两位备受好评的四分卫——安德鲁·拉克（Andrew Luck）和罗伯特·格里芬三世（Robert Griffen III）。印第安纳波利斯小马队拥有第1顺位，并且已经宣称将会选择拉克。红皮队想要罗伯特·格里芬三世，当时第2顺位的选秀权在圣路易斯公羊队手中，而该队已经有了一名很好的四分卫，所以红皮队与公羊队进行了交易。红皮队的选秀权从第6顺位上升至第2顺位，另外它还放弃了2013年第一轮和第二轮的选秀权，以及2014年第一轮的选秀权。仅仅为了上升4位，竟然付出了如此高昂的代价。</p>
<p>结果如何呢？第一年，罗伯特·格里芬三世表现得十分出色，所以这笔交易看上去是明智的，而我们这些书呆子教授看起来则很愚蠢。罗伯特·格里芬三世是一名非常高效的球员，看他比赛让人感到非常兴奋。红皮队一路凯歌，打入了季后赛，这说明如果罗伯特·格里芬三世成为全明星球员，这笔交易就绝对是明智的。但是，在赛季末罗伯特·格里芬三世不幸受伤了，无缘其中一场比赛。后来当他重新上场时，又加重了伤痛，而且需要做手术，这可能是因为他过早归队造成的。2013年，他并没有恢复到像新秀时期的最佳状态，红皮队这一赛季的最终成绩十分糟糕。它在2014年的选秀权是排在首轮第2顺位的，把这一选秀权拱手让给公羊队的代价实在是太高了。（人们还记得，红皮队一开始用多个靠后的选秀权换来的也只是第2顺位。）2014赛季，罗伯特·格里芬三世的表现也很令人失望。事后看来，另一位名叫拉塞尔·威尔逊（Russell Wilson）的球员表现得更优秀，他也不像罗伯特·格里芬三世那么容易受伤，但威尔逊在第三轮才被选中。在国家橄榄球联盟效力的三年内，威尔逊带领球队两次打进超级碗决赛，并获得一次冠军奖杯。</p>
<p>当然，我们不应该事后判断交易是否合理，格里芬三世受伤当然是红皮队的不幸，但这只是问题的一方面。当你为了选择某位球员而放弃多个选秀权时，就是把所有鸡蛋都放到了一个篮子里，而橄榄球球员其实和鸡蛋一样脆弱。[4]</p>
<p>我们与红皮队的合作并没有持续很长时间，但很快我们就发现，另外一支球队（球队的名字需要保密）非常希望与我们谈一谈选秀策略。从我们与这支球队的交流中，我们得知球队的管理层常常为选秀策略争论不休。有些具有分析能力的人相信我们的研究，并且认同我们的两条建议。不过，球队老板或教练等人常常会因为十分青睐某位球员，而坚持要用多个靠后的选秀权来换取这名球员。另外，球队确实偶尔会在第一轮选秀中以好换次，得到来年第一轮的选秀权外加第二轮的一个选秀权，但因为“庄家的钱”效应，额外得到的选秀权不会被保留多久，它们往往很快就会因球队想得到另外一个“十分有把握的球员”而被交换出去。</p>
<hr>
<p>球队未能做到选秀最优化这一案例说明，委托人–代理人问题其实更确切地说应该是愚蠢的委托人问题。经济学家会这样评价一支以次换好的球队：“这只是一个代理人问题。”经济学家的意思是，总经理或教练因为担心自己的工作保不住，所以需要马上就赢得比赛，否则将会被解雇。当然，教练和总经理被解雇的事情时常发生，所以他们担心丢掉工作也是十分合理的。但是，我认为将他们的糟糕决策归咎于传统的代理人问题是错误的。在很多情况下，不仅是在体育领域，老板至少应该和员工担负同样的责任。总经理之所以用多个靠后的选秀权换取一个靠前的选秀权，是因为球队老板希望马上就能赢。这与我们在第20章谈到的一个案例十分相似。在那个案例中，CEO希望属下接下23个有风险的项目，但因为属下担心项目不成功自己会被解雇，所以只接下了3个项目。其实，这个问题应该由CEO出面解决。</p>
<p>教练的决策也是如此。在美式橄榄球比赛中，每场比赛都是精心布局的，教练需要在几十种详细的战略战术中做出决策。这与欧洲足球不同，欧洲足球的风格更加简洁流畅，只有角球等几种定位球。美国国家橄榄球联盟中的有些独特决策可以拿来进行分析，并且已经有人做过类似的分析。其中一种决策就是在第4档时是否“继续进攻”。一支球队共有4次进攻的机会，这些机会被称为“档”，在此过程中要推进10码或得分，否则对方球队将获得球权。如果球队进攻三次还未推进10码，可以选择继续推进并尝试射门，或是选择弃踢，而将进攻权交给对方。加州大学伯克利分校的经济学家戴维·罗默研究过这个问题，发现球队并没有充分利用“选择进攻”的机会。</p>
<p>橄榄球分析专家布莱恩·伯克（Brian Burke）用更多的数据重新进行并扩展了罗默的分析。2013年，《纽约时报》运用伯克的模型开发了一个程序，可以计算球队在第4档时应该采取的最优策略，包括弃踢、继续进攻或射门。球迷可以实时关注该程序，看看如果运用数学方法，球队应该如何选择。这项研究以及免费的应用程序对橄榄球教练的行为有何影响呢？几乎没有。自从罗默的论文发表以来，球队在第4档时选择继续进攻的概率一直呈小幅下降趋势，也就是说球队越来越愚蠢了！（同样，我和凯德的论文发表后，球队的选秀策略也几乎没有变化。）</p>
<p>纳特·西尔弗（Nate Silver）擅长做体育比赛预测，并因为《信号与噪声》（The Signal and the Noise）[5]这本优秀作品而享誉全球。他估算，球队因为第4档的糟糕决定而需要付出的代价，平均来说是一个赛季少赢1/2场比赛。而《泰晤士报》（Times）的分析师认为大约是每年少赢2/3场比赛。这看起来似乎代价不大，但是一个赛季只有16场比赛。球队只要在一场比赛中做出两三次明智的决定，每隔一年就能多赢一场比赛，并且需要帮助的话它们还可以上网查询。</p>
<p>当然，教练也是普通人，他们倾向于按照自己惯用的方式做出决策，因为这样做事后不会受到老板的批评。正如凯恩斯所说，墨守成规不会让你失去饭碗。一位（经常阅读经济学期刊或是雇人这样做的）明智老板会激励属下遵循这样一条策略：让球队获胜的机会最大化，同时告诉他们，这样做不会丢掉饭碗。不过，这样的老板并不多。所以，拥有一支价值几十亿美元的橄榄球球队，并不代表你属于加里·贝克尔所说的那10%的精英之一，当然也不代表你能够雇到这样的人或是让他们做出最佳决策。</p>
<p>鉴于此，我们应该如何评判贝克尔猜想正确与否呢？贝克尔猜想指出，精于计算概率的那10%的人最终将找到需要此类技能的工作。从某种程度上说，我们也许期望贝克尔猜想是正确的：美国国家橄榄球联盟的所有球员都很擅长踢球；所有的文字编辑都擅长拼写和语法；所有的期权交易商至少都能找到计算器上代表布莱克–斯科尔斯公式的按钮。一个竞争激烈的劳动力市场确实能够指引人们找到适合他们的工作。但是，颇具讽刺意味的是，随着管理层级的不断升高，这种逻辑却似乎变得越来越不那么令人信服了。所有的经济学家至少都很擅长经济学，但很多担任系主任的经济学家却把工作做得极为糟糕。这就是著名的“彼得原理”（Peter Principle）：人们总是不断地得到晋升，直到其变得不称职。</p>
<p>橄榄球教练、系主任或CEO这些工作都是多面的。对橄榄球教练而言，能够在漫长的赛季中成功管理并激励一队年轻、富有、健壮的球员，也许比能够准确地判断在第4档时是否继续进攻更重要。高管和CEO们也是如此，很多管理层都是很差的学生。即使他们是好学生，肯定也忘记了统计课上所学的大部分知识。</p>
<p>有一种方法可以拯救贝克尔猜想，那就是辩称CEO、教练和其他受聘的管理者拥有多种技能，虽然这些技能中可能并不包括逻辑分析和推理，但他们可以聘用贝克尔所说的那10%的精英，让他们来完成各种计算。不过，我的直觉是，随着决策的重要性不断提高，依靠别人来做定量分析的倾向将逐渐减弱。当冠军之位或公司的前途处于风险之中时，管理者们往往会依靠自己的直觉。</p>
<p>现在，我和凯德已经转向了第三支球队，球队的老板希望进入贝克尔所说的精英之列。但是，我们越了解专业球队的运作情况，便越清楚让组织中的所有人都采取利润最大化以及赢得比赛的次数最大化的策略有多么困难，尤其是当这些策略违背传统观念的时候。显然，我们需要获得老板的明确支持，不过，老板必须让所有为他工作的员工相信，如果他们采取了明智但非传统的做法，即使失败了（或者尤其是在失败的情况下），也会受到褒奖。很少有球队做到这一点，正如没有足够多的球队在第4档时选择继续进攻以及大多数球队在选秀日做出的糟糕决策一样。我们可以看到，若要了解球队或任何其他组织是如何做出决定的，以及是如何改善决策的，我们就需要记住一点，即这些组织都是由普通人拥有并管理的。</p>
<p>[1] 令人难过的是，2014年我在写作本书时，加里·贝克尔去世了，他是我见过的最富有想象力的经济学家之一。很遗憾，他不能告诉我他对本书的想法。虽然我不同意他的观点，但我确实从中有所收获。“他既是一位绅士，又是一名学者”，这句评价虽然像是陈词滥调，但用来描述贝克尔却十分恰当。</p>
<p>[2] 这些统计数据只使用“首开次数”这一标准来确定球员的表现。我们之所以用这种简单的标准，是因为这项指标可以衡量任何位置的球员。不过，即使我们只用更细致的成绩作为标准，比如外接手或跑锋获得的码数，这些结果以及我后面提到的其他结果仍十分相似。</p>
<p>[3] 一支真正聪明的球队会用今年第二轮的选秀权换取次年第一轮的选秀权，然后再用第一轮的选秀权交换次年第二轮的多个选秀权，或者再用其中的一个选秀权换取第三年的第一轮选秀权，依此类推。</p>
<p>[4] 2014年华盛顿红皮队在赛季末的一场比赛中与圣路易斯公羊队对决，红皮队为了得到梦寐以求的球员所放弃的所有选秀权都到了公羊队手中。比赛一开始，公羊队教练就派出了所有用额外选秀权选到的球员，让其中一人作为队长扔硬币开球。最终公羊队以24∶0完胜红皮队，格里芬三世因为表现不佳而一直坐在长椅上。斯奈德先生是否因此学会了要有耐心，我们拭目以待。</p>
<p>[5] 《信号与噪声》一书中文版已由中信出版社于2013年8月出版。——编者注</p>

      
    </div>

    

    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center;">
  <img id="wechat_subscriber_qcode" src="/images/rainba-qcode.jpg" alt=" wechat" style="width: 200px; max-width: 100%;">
  <div>Subscribe to my blog by scanning my public wechat account</div>
</div>

      </div>
    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/错误的行为/" rel="tag"># 错误的行为</a>
          
            <a href="/tags/行为经济学/" rel="tag"># 行为经济学</a>
          
            <a href="/tags/理查德·泰勒/" rel="tag"># 理查德·泰勒</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/10/13/财经/错误的行为Richard H. Thaler/第30章 有奖竞猜类节目你该怎么玩？/" rel="next" title="第30章 有奖竞猜类节目你该怎么玩？">
                <i class="fa fa-chevron-left"></i> 第30章 有奖竞猜类节目你该怎么玩？
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/10/13/财经/错误的行为Richard H. Thaler/第28章 挑选办公室的风波/" rel="prev" title="第28章 挑选办公室的风波">
                第28章 挑选办公室的风波 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">Moisturizing things in a fine silence</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">48</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#第29章-球队选秀与贝克尔猜想"><span class="nav-number">1.</span> <span class="nav-text">第29章  球队选秀与贝克尔猜想</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rainba Perspective</span>

  

  
</div>









        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.0"></script>

  <script src="/js/src/motion.js?v=7.0.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.0"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.0"></script>
<script src="/js/src/post-details.js?v=7.0.0"></script>



  


  <script src="/js/src/bootstrap.js?v=7.0.0"></script>



  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  
  
  
  <script src="/lib/bookmark/bookmark.min.js?v=1.0"></script>
  <script>
  
    bookmark.scrollToMark('auto', "#more");
  
  </script>


  

</body>
</html>
